<UserControl
             xmlns:uc="AP8PO.UserControls.ManageCommitsControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:AP8PO" xmlns:mockdata="clr-namespace:AP8PO.MockData"
             xmlns:converters="clr-namespace:AP8PO.Converters" 
             xmlns:local1="clr-namespace:AP8PO.UserControls" x:Class="AP8PO.UserControls.ManageCommitsControl"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <UserControl.Resources>
        <ResourceDictionary>
            <converters:IsCommitAutogenerated x:Key="IsCommitAutogenerated"/>
            <converters:IsCommitNotAutogenerated x:Key="IsCommitNotAutogenerated"/>
            <mockdata:MockGroupData x:Key="DesignViewModel"/>
            <mockdata:LocalData x:Key="LocalData"/>
            <Style TargetType="TextBox" x:Key="AutogeneratedCheck">
                <Setter Property="IsReadOnly" Value="{Binding Converter={StaticResource IsCommitAutogenerated}}" />
            </Style>
            <Style TargetType="ComboBox" x:Key="AutogeneratedCheckCb">
                <Setter Property="IsReadOnly" Value="{Binding Converter={StaticResource IsCommitAutogenerated}}" />
                <Setter Property="IsEnabled" Value="{Binding Converter={StaticResource IsCommitNotAutogenerated}}" />
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="20"/>
        </Grid.RowDefinitions>

        <DataGrid Grid.Row="0" x:Name="list" ItemsSource="{Binding CourseCommits}" AutoGenerateColumns="False" CanUserSortColumns="True" CanUserAddRows="True" Margin="0,5"
                      ScrollViewer.CanContentScroll="True" 
                      ScrollViewer.VerticalScrollBarVisibility="Auto"
                      ScrollViewer.HorizontalScrollBarVisibility="Auto">
            <DataGrid.ContextMenu>
                <ContextMenu >
                    <MenuItem Header="Delete" Click="DeleteCommitItem_Click"></MenuItem>
                </ContextMenu>
            </DataGrid.ContextMenu>
            <DataGrid.Columns>
                <DataGridTextColumn Header="Name" Binding="{Binding Name}" EditingElementStyle="{StaticResource ResourceKey=AutogeneratedCheck}"/>
                <DataGridTextColumn Header="Abbrevation" Binding="{Binding Abbrevation}" EditingElementStyle="{StaticResource ResourceKey=AutogeneratedCheck}"/>
                <DataGridTextColumn Header="Hours" Binding="{Binding Hours}" EditingElementStyle="{StaticResource ResourceKey=AutogeneratedCheck}"/>
                <DataGridTextColumn Header="Number Of Students" Binding="{Binding NumberOfStudents}" EditingElementStyle="{StaticResource ResourceKey=AutogeneratedCheck}"/>
                <DataGridTextColumn Header="Course" Binding="{Binding Course}" EditingElementStyle="{StaticResource ResourceKey=AutogeneratedCheck}"/>
                <DataGridTextColumn Header="Employee" Binding="{Binding Employee}" IsReadOnly="True"/>
                <DataGridComboBoxColumn x:Name="courseCb" Header="Course Type" SelectedItemBinding="{Binding CourseType}" EditingElementStyle="{StaticResource ResourceKey=AutogeneratedCheckCb}"/>
                <DataGridComboBoxColumn x:Name="languageCb" Header="Language" SelectedItemBinding="{Binding Language}" EditingElementStyle="{StaticResource ResourceKey=AutogeneratedCheckCb}"/>
                <DataGridCheckBoxColumn Header="Autogenerated" Binding="{Binding Autogenerated}" IsReadOnly="True"/>
            </DataGrid.Columns>
            <DataGrid.RowDetailsTemplate>
                <DataTemplate>
                    <Grid HorizontalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        <Label Grid.Row="1" Margin="0,0,10,0" Content="Assigned employee" />
                        <DataGrid x:Name="allCoursesList" Grid.Row="2" AutoGenerateColumns="False" SelectionMode="Single" CanUserAddRows="False" ItemsSource="{Binding DataContext.AssignedEmployee, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local1:ManageCommitsControl}}}">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="First Name" Binding="{Binding FirstName}" IsReadOnly="True"/>
                                <DataGridTextColumn Header="Surname" Binding="{Binding Surname}" IsReadOnly="True"/>
                                <DataGridTextColumn Header="Telephone" Binding="{Binding Telephone}" IsReadOnly="True"/>
                                <DataGridTextColumn Header="Email" Binding="{Binding WorkEmail}" IsReadOnly="True"/>
                                <DataGridCheckBoxColumn Header="Doctorand" Binding="{Binding Doctorand}" IsReadOnly="True"/>
                                <DataGridTextColumn Header="Allocation (%)" Binding="{Binding AllocationPercent}" IsReadOnly="True"/>
                                <DataGridTextColumn Header="Current allocation (h)" Binding="{Binding CurrentLoad}" IsReadOnly="True"/>
                                <DataGridTextColumn Header="MaxLoad" Binding="{Binding MaxLoad}" IsReadOnly="True"/>
                                <DataGridTemplateColumn Header="">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button Click="Unassign_Click" Content="Unassign"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                        <Label Grid.Row="3" Margin="0,0,10,0" Content="All employees"/>
                        <DataGrid ItemsSource="{Binding AllEmployees, Source={StaticResource LocalData}}" Grid.Row="4" AutoGenerateColumns="False" CanUserAddRows="False">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="First Name" Binding="{Binding FirstName}" IsReadOnly="True"/>
                                <DataGridTextColumn Header="Surname" Binding="{Binding Surname}" IsReadOnly="True"/>
                                <DataGridTextColumn Header="Telephone" Binding="{Binding Telephone}" IsReadOnly="True"/>
                                <DataGridTextColumn Header="Email" Binding="{Binding WorkEmail}" IsReadOnly="True"/>
                                <DataGridCheckBoxColumn Header="Doctorand" Binding="{Binding Doctorand}" IsReadOnly="True"/>
                                <DataGridTextColumn Header="Allocation (%)" Binding="{Binding ActualLoadPercent}" IsReadOnly="True"/>
                                <DataGridTextColumn Header="Current allocation (h)" Binding="{Binding CurrentLoad}" IsReadOnly="True"/>
                                <DataGridTextColumn Header="MaxLoad" Binding="{Binding MaxLoad}" IsReadOnly="True"/>
                                <DataGridTemplateColumn Header="">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button Click="Assign_Click" Content="Assign"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Grid>
                </DataTemplate>
            </DataGrid.RowDetailsTemplate>
        </DataGrid>
        <CheckBox Grid.Row="1" Click="CheckBox_Click" IsChecked="True">Show assigned</CheckBox>
        <Button Grid.Row="1" Click="GenerateCommits_ButtonClick" Content="Generate commits" HorizontalAlignment="Right"/>
    </Grid>
</UserControl>
